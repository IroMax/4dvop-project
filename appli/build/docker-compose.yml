version: '3'

services:
  api:
    container_name: api
    build: /opt/bitnami/jenkins/jenkins_home/workspace/4dvop_master/appli/simple_api
    image: 192.168.48.12:8000/simple-api:latest
#    volumes:
#      - /opt/bitnami/jenkins/jenkins_home/workspace/4dvop_master/appli/simple_api:/usr/src/app
#      - /opt/bitnami/jenkins/jenkins_home/workspace/4dvop_master/appli/simple_api/student_age.json:/data/student_age.json
    ports:
      - 5000:5000

  website:
    image: php:apache
    container_name: app
    volumes:
      - /opt/bitnami/jenkins/jenkins_home/workspace/4dvop_master/appli/website:/var/www/html
    ports:
      - 80:80
    depends_on:
      - api
